{# Acquire URL segments #}
{% set segment1 = craft.app.request.segment(1) %}
{% set segment2 = craft.app.request.segment(2) %}
{% set segment3 = craft.app.request.segment(3) %}
{% set segment4 = craft.app.request.segment(4) %}
{% set segment5 = craft.app.request.segment(5) %}
{% set segment6 = craft.app.request.segment(6) %}
{% set segment7 = craft.app.request.segment(7) %}

{% if segment3 and segment4 and segment5 %}
    {% set targetStartDate = segment3 ~ '-' ~ segment4 ~ '-01' %}
    {% set targetEndDate = segment3 ~ '-' ~ segment4 ~ '-' ~ segment5 %}
{% else %}
    {% set targetStartDate = 'today' %}
    {% set targetEndDate = '+30 days' %}
{% endif %}
            {% set eventOptions = {
                rangeStart: targetStartDate,
                rangeEnd: targetEndDate,
                limit: 5
            } %}

            {% paginate craft.calendar.events(eventOptions) as pageInfo, events %}

            {% for event in events %}

                <div class="card" style="border-color: {{ event.calendar.color }}; margin-bottom: 20px;">
                    <h4 class="card-header d-flex justify-content-between align-items-center" style="color: {{ event.calendar.contrastColor }}; background-color: {{ event.calendar.lighterColor }};">
                        {{ event.title }}&nbsp;&nbsp;
                        
                    </h4>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <strong>
                            {{ event.startDate.format('l, F j, Y') }}
                            {% if event.allDay %}
                                (all day)
                            {% else %}
                                at {{ event.startDate.format("g:ia") }} -
                                {% if event.multiDay %}
                                    <br />{{ event.endDate.format("l, F j, Y \\a\\t g:ia") }}
                                {% else %}
                                    {{ event.endDate.format("g:ia") }}
                                {% endif %}
                            {% endif %}
                        </strong>
                        </li>
                    </ul>
                </div>

            {% else %}
                <p>No events could be found within the specified time range (today until 6 months from today).</p>
            {% endfor %}
